<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Emigration Pro" />
    <meta property="og:description" content="Expert emigration guidance for US citizens seeking their perfect international destination" />
    <meta
      property="og:image"
      content="https://mocha-cdn.com/og.png"
      type="image/png"
    />
    <meta
      property="og:url"
      content="https://getmocha.com"
    />
    <meta property="og:type" content="website" />
    <meta property="og:author" content="Emigration Pro" />
    <meta property="og:site_name" content="Emigration Pro" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="@emigrationpro" />
    <meta property="twitter:title" content="Emigration Pro" />
    <meta property="twitter:description" content="Expert emigration guidance for US citizens seeking their perfect international destination" />
    <meta
      property="twitter:image"
      content="https://mocha-cdn.com/og.png"
      type="image/png"
    />
    <link
      rel="shortcut icon"
      href="https://mocha-cdn.com/favicon.ico"
      type="image/x-icon"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://mocha-cdn.com/apple-touch-icon.png"
      type="image/png"
    />
    
    <!-- Use system fonts only - no external font dependencies to prevent 502 errors -->
    <style>
      /* System font stack - no external dependencies */
      :root {
        --font-family-primary: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, "Helvetica Neue", Arial, sans-serif;
        --font-family-heading: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, "Helvetica Neue", Arial, sans-serif;
      }
      
      html, body {
        font-family: var(--font-family-primary);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      /* Ensure all elements use system fonts */
      *, *::before, *::after {
        font-family: var(--font-family-primary) !important;
      }
      
      /* Headings use the heading font */
      h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-family-heading) !important;
        font-weight: 600;
      }
      
      /* Override any potential font issues */
      .mocha-watermark, [class*="mocha"], [id*="mocha"] {
        font-family: var(--font-family-primary) !important;
      }
    </style>
    
    <!-- Prevent any external font loading to avoid 502 errors -->
    <meta http-equiv="Content-Security-Policy" content="font-src 'self' data:; style-src 'self' 'unsafe-inline';">
    
    <!-- COMPREHENSIVE 502 ERROR PREVENTION -->
    <script>
      // BLOCK ALL EXTERNAL FONT REQUESTS TO PREVENT 502 ERRORS
      (function() {
        'use strict';
        
        // Block fetch requests to font services
        if (typeof window !== 'undefined' && window.fetch) {
          const originalFetch = window.fetch;
          window.fetch = function(...args) {
            const url = String(args[0] || '');
            if (url.match(/\.(woff|woff2|ttf|eot|otf)(\?|$)/) || 
                url.includes('/fonts/') || 
                url.match(/fonts\./)) {
              console.log('ðŸš« BLOCKED FONT REQUEST:', url);
              return Promise.resolve(new Response('', { status: 204 }));
            }
            return originalFetch.apply(this, args);
          };
        }
        
        // Block XMLHttpRequest to font services
        if (typeof window !== 'undefined' && window.XMLHttpRequest) {
          const originalXHROpen = XMLHttpRequest.prototype.open;
          XMLHttpRequest.prototype.open = function(method, url, ...rest) {
            const urlStr = String(url || '');
            if (urlStr.match(/\.(woff|woff2|ttf|eot|otf)(\?|$)/) || 
                urlStr.includes('/fonts/') || 
                urlStr.match(/fonts\./)) {
              console.log('ðŸš« BLOCKED XHR FONT REQUEST:', urlStr);
              throw new Error('External font requests blocked to prevent 502 errors');
            }
            return originalXHROpen.call(this, method, url, ...rest);
          };
        }
        
        // Remove any font-related link tags
        function removeFontLinks() {
          const links = document.querySelectorAll('link[rel="stylesheet"], link[rel="preconnect"], link[rel="preload"]');
          links.forEach(link => {
            const href = link.href || '';
            if (href.includes('/fonts/') || href.match(/fonts\./)) {
              console.log('ðŸš« REMOVED FONT LINK:', href);
              link.remove();
            }
          });
        }
        
        // Remove font imports from style tags
        function removeFontImports() {
          const styles = document.querySelectorAll('style');
          styles.forEach(style => {
            if (style.textContent && 
                (style.textContent.includes('@import') && 
                 style.textContent.includes('/fonts/'))) {
              console.log('ðŸš« REMOVED FONT IMPORT STYLE');
              style.remove();
            }
          });
        }
        
        // Run cleanup immediately and on DOM changes
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', function() {
            removeFontLinks();
            removeFontImports();
          });
        } else {
          removeFontLinks();
          removeFontImports();
        }
        
        // Monitor for new font elements
        if (typeof MutationObserver !== 'undefined') {
          const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
              mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) { // Element node
                  if (node.tagName === 'LINK' && node.href && 
                      (node.href.includes('/fonts/') || node.href.match(/fonts\./))) {
                    console.log('ðŸš« BLOCKED NEW FONT LINK:', node.href);
                    node.remove();
                  }
                  if (node.tagName === 'STYLE' && node.textContent &&
                      node.textContent.includes('@import') &&
                      node.textContent.includes('/fonts/')) {
                    console.log('ðŸš« BLOCKED NEW FONT STYLE');
                    node.remove();
                  }
                }
              });
            });
          });
          
          observer.observe(document.documentElement, {
            childList: true,
            subtree: true
          });
        }
      })();
    </script>
    
    <title>Emigration Pro</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/react-app/main.tsx"></script>
  </body>
  <!-- StatCounter Visitor Counter -->
  <script type="text/javascript">
    var sc_project=13160824; 
    var sc_invisible=1; 
    var sc_security="a9d1f1b2"; 
  </script>
  <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>
  <noscript><div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/13160824/0/a9d1f1b2/1/" alt="Web Analytics" referrerPolicy="no-referrer-when-downgrade" /></a></div></noscript>
</html>
